/*!
 * cxn 0.4.0+201312300800
 * https://github.com/ryanve/cxn
 * MIT License 2013 Ryan Van Etten
 */
!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():a[b]=c()}(this,"cxn",function(){function a(a,b){for(var c=0,d=a&&a.length;d>c;)a[c++].call(b);return c}function b(a,b,c){c>>=0;for(var d=a.length;d--&&(b!==a[d]||!a.splice(d,1)||--c););}var c={},d=+new Date,e=d,f=0,g=function(){f++,e=+new Date},h="onLine",i="undefined"==typeof window,j=!i&&navigator,k=!1===j[h]?1/0:0,l=!i&&window,m=!i&&document,n="addEventListener",o=j.connection||j.mozConnection||!1,p="bandwidth",q="metered",r="offline",s="online",t="stable",u="un"+t,v=[r,s],w={},x="listeners",y="emit",z="wire",A="un"+z,B="hasOwnProperty",C=function(a){a.splice(0,a.length)},D=function(a,b){return!!b&&"on"+a in b},E=l?n in l?function(a,b,c){a[n](b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)}:function(){},F=!0,G=function(a){F=!a},H=function(){i||document.documentElement.setAttribute("data-cxn",[c[s]()?s:r,c[t]()?t:u].join(" "))};return c[x]=function(a){if(null==a)throw new TypeError("@0");return w[B](a)&&w[a]||(w[a]=[])},c[y]=function(b){return a(c[x](b),c)},c[z]=c.line=function(a,b){var d,e=a,f=2;if("function"==typeof a&&("string"==typeof b?e=b:d=1,b=a),"string"==typeof a&&"function"!=typeof b)c[y](a);else for(;f--;)(d||v[f]===e)&&c[x](v[f]).push(b);return this},c[A]=c.unline=function(a,d){var e,f=a,g=2;if("function"==typeof a&&("string"==typeof d?f=d:e=1,d=a),"string"==typeof a&&"function"!=typeof d)C(c[x](a));else for(;g--;)(e||v[g]===f)&&b(c[x](v[g]),d);return this},c[p]=function(){var a=o;return a&&(a=a[p])===+a?a:c[r]()?0:1/0},c[q]=function(){return o?!0===o[q]:!1},c[u]=function(){return f},c[t]=function(){return!f},c.elapsed=function(){return+new Date-d},c.interim=function(){return+new Date-e},c.late=function(){return k},function(a,b){for(var c=2;c--;)b(a[c],c)}(v,function(a,b){function f(){g(),b&&k==k/0&&(k=e-d||1),c[y](a)}i||(D(a,l)?E(l,a,f):D(a,m.body)&&E(m.body,a,f)),c[a]=i?function(){return require("dns").resolve("google.com",G),b==F}:function(d){return"function"==typeof d&&c[z](a,d),!1!==j[h]==b},c[b?"life":"gap"]=function(){return c[a]()?+new Date-e||1:0}}),H(),c[z](H),c});